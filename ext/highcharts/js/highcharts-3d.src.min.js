// ==ClosureCompiler==
// @compilation_level SIMPLE_OPTIMIZATIONS
!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){function i(t,i,e){var r,s=i.options.chart.options3d,a=!1
e?(a=i.inverted,r={x:i.plotWidth/2,y:i.plotHeight/2,z:s.depth/2,vd:d(s.depth,1)*d(s.viewDistance,0)}):r={x:i.plotLeft+i.plotWidth/2,y:i.plotTop+i.plotHeight/2,z:s.depth/2,vd:d(s.depth,1)*d(s.viewDistance,0)}
var o,h,p,l,c,u,g=[],m=r.x,z=r.y,v=r.z,b=r.vd,w=y*(a?s.beta:-s.beta),A=y*(a?-s.alpha:s.alpha),k=x(w),P=f(w),L=x(A),S=f(A)
return n(t,function(t){o=(a?t.y:t.x)-m,h=(a?t.x:t.y)-z,p=(t.z||0)-v,l=P*o-k*p,c=-k*L*o+S*h-P*L*p,u=k*S*o+L*h+P*S*p,b>0&&b<Number.POSITIVE_INFINITY&&(l*=b/(u+v+b),c*=b/(u+v+b)),l+=m,c+=z,u+=v,g.push({x:a?c:l,y:a?l:c,z:u})}),g}function e(t){return void 0!==t&&null!==t}function r(t){var i,e,r=0
for(i=0;i<t.length;i++)e=(i+1)%t.length,r+=t[i].x*t[e].y-t[e].x*t[i].y
return r/2}function s(t){var i,e=0
for(i=0;i<t.length;i++)e+=t[i].z
return t.length?e/t.length:0}function a(t,i,e,r,s,o,n,h){var p=[]
if(o>s&&o-s>u/2+1e-4)p=p.concat(a(t,i,e,r,s,s+u/2,n,h)),p=p.concat(a(t,i,e,r,s+u/2,o,n,h))
else if(s>o&&s-o>u/2+1e-4)p=p.concat(a(t,i,e,r,s,s-u/2,n,h)),p=p.concat(a(t,i,e,r,s-u/2,o,n,h))
else{var l=o-s
p=["C",t+e*f(s)-e*m*l*x(s)+n,i+r*x(s)+r*m*l*f(s)+h,t+e*f(o)+e*m*l*x(o)+n,i+r*x(o)-r*m*l*f(o)+h,t+e*f(o)+n,i+r*x(o)+h]}return p}function o(i){if(this.chart.is3d()){var r=this.chart.options.plotOptions.column.grouping
void 0===r||r||void 0===this.group.zIndex||this.zIndexSet||(this.group.attr({zIndex:10*this.group.zIndex}),this.zIndexSet=!0)
var s=this.options,a=this.options.states
this.borderWidth=s.borderWidth=e(s.edgeWidth)?s.edgeWidth:1,t.each(this.data,function(i){if(null!==i.y){var e=i.pointAttr
this.borderColor=t.pick(s.edgeColor,e[""].fill),e[""].stroke=this.borderColor,e.hover.stroke=t.pick(a.hover.edgeColor,this.borderColor),e.select.stroke=t.pick(a.select.edgeColor,this.borderColor)}})}i.apply(this,[].slice.call(arguments,1))}var n=t.each,h=t.extend,p=t.inArray,l=t.merge,d=t.pick,c=t.wrap,u=Math.PI,y=u/180,x=Math.sin,f=Math.cos,g=Math.round
t.perspective=i
var m=4*(Math.sqrt(2)-1)/3/(u/2)
t.SVGRenderer.prototype.toLinePath=function(i,e){var r=[]
return t.each(i,function(t){r.push("L",t.x,t.y)}),i.length&&(r[0]="M",e&&r.push("Z")),r},t.SVGRenderer.prototype.cuboid=function(i){var r=this.g(),s=this.cuboidPath(i)
return r.front=this.path(s[0]).attr({zIndex:s[3],"stroke-linejoin":"round"}).add(r),r.top=this.path(s[1]).attr({zIndex:s[4],"stroke-linejoin":"round"}).add(r),r.side=this.path(s[2]).attr({zIndex:s[5],"stroke-linejoin":"round"}).add(r),r.fillSetter=function(i){var e=i,r=t.Color(i).brighten(.1).get(),s=t.Color(i).brighten(-.1).get()
return this.front.attr({fill:e}),this.top.attr({fill:r}),this.side.attr({fill:s}),this.color=i,this},r.opacitySetter=function(t){return this.front.attr({opacity:t}),this.top.attr({opacity:t}),this.side.attr({opacity:t}),this},r.attr=function(i){if(!i.shapeArgs&&!e(i.x))return t.SVGElement.prototype.attr.call(this,i)
var r=i.shapeArgs||i,s=this.renderer.cuboidPath(r)
return this.front.attr({d:s[0],zIndex:s[3]}),this.top.attr({d:s[1],zIndex:s[4]}),this.side.attr({d:s[2],zIndex:s[5]}),this},r.animate=function(i,r,s){if(e(i.x)&&e(i.y)){var a=this.renderer.cuboidPath(i)
this.front.attr({zIndex:a[3]}).animate({d:a[0]},r,s),this.top.attr({zIndex:a[4]}).animate({d:a[1]},r,s),this.side.attr({zIndex:a[5]}).animate({d:a[2]},r,s),this.attr({zIndex:-a[6]})}else i.opacity?(this.front.animate(i,r,s),this.top.animate(i,r,s),this.side.animate(i,r,s)):t.SVGElement.prototype.animate.call(this,i,r,s)
return this},r.destroy=function(){return this.front.destroy(),this.top.destroy(),this.side.destroy(),null},r.attr({zIndex:-s[6]}),r},t.SVGRenderer.prototype.cuboidPath=function(e){function a(t){return y[t]}var o=e.x,n=e.y,h=e.z,p=e.height,l=e.width,d=e.depth,c=t.charts[this.chartIndex],u=t.map,y=[{x:o,y:n,z:h},{x:o+l,y:n,z:h},{x:o+l,y:n+p,z:h},{x:o,y:n+p,z:h},{x:o,y:n+p,z:h+d},{x:o+l,y:n+p,z:h+d},{x:o+l,y:n,z:h+d},{x:o,y:n,z:h+d}]
y=i(y,c,e.insidePlotArea)
var x=function(t,i){var e=[]
return t=u(t,a),i=u(i,a),r(t)<0?e=t:r(i)<0&&(e=i),e},f=[3,2,1,0],g=[7,6,5,4],m=x(f,g),z=[1,6,7,0],v=[4,5,2,3],b=x(z,v),w=[1,2,5,6],A=[0,7,4,3],k=x(w,A)
return[this.toLinePath(m,!0),this.toLinePath(b,!0),this.toLinePath(k,!0),s(m),s(b),s(k),9e9*s(u(v,a))]},t.SVGRenderer.prototype.arc3d=function(i){function e(t){var i=!1,e={}
for(var r in t)-1!==p(r,a)&&(e[r]=t[r],delete t[r],i=!0)
return i?e:!1}var r=this.g(),s=r.renderer,a=["x","y","r","innerR","start","end"]
return i=l(i),i.alpha*=y,i.beta*=y,r.top=s.path(),r.side1=s.path(),r.side2=s.path(),r.inn=s.path(),r.out=s.path(),r.onAdd=function(){var t=r.parentGroup
r.top.add(r),r.out.add(t),r.inn.add(t),r.side1.add(t),r.side2.add(t)},r.setPaths=function(t){var i=r.renderer.arc3dPath(t),e=100*i.zTop
r.attribs=t,r.top.attr({d:i.top,zIndex:i.zTop}),r.inn.attr({d:i.inn,zIndex:i.zInn}),r.out.attr({d:i.out,zIndex:i.zOut}),r.side1.attr({d:i.side1,zIndex:i.zSide1}),r.side2.attr({d:i.side2,zIndex:i.zSide2}),r.zIndex=e,r.attr({zIndex:e}),t.center&&(r.top.setRadialReference(t.center),delete t.center)},r.setPaths(i),r.fillSetter=function(i){var e=t.Color(i).brighten(-.1).get()
return this.fill=i,this.side1.attr({fill:e}),this.side2.attr({fill:e}),this.inn.attr({fill:e}),this.out.attr({fill:e}),this.top.attr({fill:i}),this},n(["opacity","translateX","translateY","visibility"],function(t){r[t+"Setter"]=function(t,i){r[i]=t,n(["out","inn","side1","side2","top"],function(e){r[e].attr(i,t)})}}),c(r,"attr",function(t,i,s){var a
return"object"==typeof i&&(a=e(i),a&&(h(r.attribs,a),r.setPaths(r.attribs))),t.call(this,i,s)}),c(r,"animate",function(t,i,r,s){var a,o,n=this.attribs
return delete i.center,delete i.z,delete i.depth,delete i.alpha,delete i.beta,r=d(r,this.renderer.globalAnimation),r&&("object"!=typeof r&&(r={}),i=l(i),a=e(i),a&&(o=a,r.step=function(t,i){function e(t){return n[t]+(d(o[t],n[t])-n[t])*i.pos}i.elem.setPaths(l(n,{x:e("x"),y:e("y"),r:e("r"),innerR:e("innerR"),start:e("start"),end:e("end")}))})),t.call(this,i,r,s)}),r.destroy=function(){this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),t.SVGElement.prototype.destroy.call(this)},r.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},r.show=function(){this.top.show(),this.out.show(),this.inn.show(),this.side1.show(),this.side2.show()},r},t.SVGRenderer.prototype.arc3dPath=function(t){function i(t){return t%=2*u,t>u&&(t=2*u-t),t}var e=t.x,r=t.y,s=t.start,o=t.end-1e-5,n=t.r,h=t.innerR,p=t.depth,l=t.alpha,d=t.beta,c=f(s),y=x(s),g=f(o),m=x(o),z=n*f(d),v=n*f(l),b=h*f(d),w=h*f(l),A=p*x(d),k=p*x(l),P=["M",e+z*c,r+v*y]
P=P.concat(a(e,r,z,v,s,o,0,0)),P=P.concat(["L",e+b*g,r+w*m]),P=P.concat(a(e,r,b,w,o,s,0,0)),P=P.concat(["Z"])
var L=d>0?u/2:0,S=l>0?0:u/2,I=s>-L?s:o>-L?-L:s,M=u-S>o?o:u-S>s?u-S:o,C=2*u-S,T=["M",e+z*f(I),r+v*x(I)]
T=T.concat(a(e,r,z,v,I,M,0,0)),o>C&&C>s?(T=T.concat(["L",e+z*f(M)+A,r+v*x(M)+k]),T=T.concat(a(e,r,z,v,M,C,A,k)),T=T.concat(["L",e+z*f(C),r+v*x(C)]),T=T.concat(a(e,r,z,v,C,o,0,0)),T=T.concat(["L",e+z*f(o)+A,r+v*x(o)+k]),T=T.concat(a(e,r,z,v,o,C,A,k)),T=T.concat(["L",e+z*f(C),r+v*x(C)]),T=T.concat(a(e,r,z,v,C,M,0,0))):o>u-S&&u-S>s&&(T=T.concat(["L",e+z*f(M)+A,r+v*x(M)+k]),T=T.concat(a(e,r,z,v,M,o,A,k)),T=T.concat(["L",e+z*f(o),r+v*x(o)]),T=T.concat(a(e,r,z,v,o,M,0,0))),T=T.concat(["L",e+z*f(M)+A,r+v*x(M)+k]),T=T.concat(a(e,r,z,v,M,I,A,k)),T=T.concat(["Z"])
var W=["M",e+b*c,r+w*y]
W=W.concat(a(e,r,b,w,s,o,0,0)),W=W.concat(["L",e+b*f(o)+A,r+w*x(o)+k]),W=W.concat(a(e,r,b,w,o,s,A,k)),W=W.concat(["Z"])
var F=["M",e+z*c,r+v*y,"L",e+z*c+A,r+v*y+k,"L",e+b*c+A,r+w*y+k,"L",e+b*c,r+w*y,"Z"],Z=["M",e+z*g,r+v*m,"L",e+z*g+A,r+v*m+k,"L",e+b*g+A,r+w*m+k,"L",e+b*g,r+w*m,"Z"],R=Math.atan2(k,-A),V=Math.abs(o+R),Y=Math.abs(s+R),O=Math.abs((s+o)/2+R)
V=i(V),Y=i(Y),O=i(O)
var X=1e5,G=O*X,D=Y*X,E=V*X
return{top:P,zTop:u*X+1,out:T,zOut:Math.max(G,D,E),inn:W,zInn:Math.max(G,D,E),side1:F,zSide1:.99*E,side2:Z,zSide2:.99*D}},t.Chart.prototype.is3d=function(){return this.options.chart.options3d&&this.options.chart.options3d.enabled},t.wrap(t.Chart.prototype,"isInsidePlot",function(t){return this.is3d()||t.apply(this,[].slice.call(arguments,1))})
var z=t.getOptions()
z.chart.options3d={enabled:!1,alpha:0,beta:0,depth:100,viewDistance:25,frame:{bottom:{size:1,color:"rgba(255,255,255,0)"},side:{size:1,color:"rgba(255,255,255,0)"},back:{size:1,color:"rgba(255,255,255,0)"}}},t.wrap(t.Chart.prototype,"init",function(i){var e,r,s=[].slice.call(arguments,1)
s[0].chart&&s[0].chart.options3d&&s[0].chart.options3d.enabled&&(s[0].chart.options3d.alpha=(s[0].chart.options3d.alpha||0)%360,s[0].chart.options3d.beta=(s[0].chart.options3d.beta||0)%360,e=s[0].plotOptions||{},r=e.pie||{},r.borderColor=t.pick(r.borderColor,void 0)),i.apply(this,s)}),t.wrap(t.Chart.prototype,"setChartSize",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.is3d()){var i=this.inverted,e=this.clipBox,r=this.margin,s=i?"y":"x",a=i?"x":"y",o=i?"height":"width",n=i?"width":"height"
e[s]=-(r[3]||0),e[a]=-(r[0]||0),e[o]=this.chartWidth+(r[3]||0)+(r[1]||0),e[n]=this.chartHeight+(r[0]||0)+(r[2]||0)}}),t.wrap(t.Chart.prototype,"redraw",function(t){this.is3d()&&(this.isDirtyBox=!0),t.apply(this,[].slice.call(arguments,1))}),t.wrap(t.Chart.prototype,"renderSeries",function(t){var i,e=this.series.length
if(this.is3d())for(;e--;)i=this.series[e],i.translate(),i.render()
else t.call(this)}),t.Chart.prototype.retrieveStacks=function(i){var e,r=this.series,s={},a=1
return t.each(this.series,function(t){e=d(t.options.stack,i?0:r.length-1-t.index),s[e]?s[e].series.push(t):(s[e]={series:[t],position:a},a++)}),s.totalStacks=a+1,s},t.wrap(t.Axis.prototype,"setOptions",function(i,e){var r
i.call(this,e),this.chart.is3d()&&(r=this.options,r.tickWidth=t.pick(r.tickWidth,0),r.gridLineWidth=t.pick(r.gridLineWidth,1))}),t.wrap(t.Axis.prototype,"render",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var i=this.chart,e=i.renderer,r=i.options.chart.options3d,s=r.frame,a=s.bottom,o=s.back,n=s.side,h=r.depth,p=this.height,l=this.width,d=this.left,c=this.top
if(!this.isZAxis)if(this.horiz){var u={x:d,y:c+(i.xAxis[0].opposite?-a.size:p),z:0,width:l,height:a.size,depth:h,insidePlotArea:!1}
this.bottomFrame?this.bottomFrame.animate(u):this.bottomFrame=e.cuboid(u).attr({fill:a.color,zIndex:i.yAxis[0].reversed&&r.alpha>0?4:-1}).css({stroke:a.color}).add()}else{var y={x:d+(i.yAxis[0].opposite?0:-n.size),y:c+(i.xAxis[0].opposite?-a.size:0),z:h,width:l+n.size,height:p+a.size,depth:o.size,insidePlotArea:!1}
this.backFrame?this.backFrame.animate(y):this.backFrame=e.cuboid(y).attr({fill:o.color,zIndex:-3}).css({stroke:o.color}).add()
var x={x:d+(i.yAxis[0].opposite?l:-n.size),y:c+(i.xAxis[0].opposite?-a.size:0),z:0,width:n.size,height:p+a.size,depth:h,insidePlotArea:!1}
this.sideFrame?this.sideFrame.animate(x):this.sideFrame=e.cuboid(x).attr({fill:n.color,zIndex:-2}).css({stroke:n.color}).add()}}}),t.wrap(t.Axis.prototype,"getPlotLinePath",function(t){var e=t.apply(this,[].slice.call(arguments,1))
if(!this.chart.is3d())return e
if(null===e)return e
var r=this.chart,s=r.options.chart.options3d,a=this.isZAxis?r.plotWidth:s.depth,o=this.opposite
this.horiz&&(o=!o)
var n=[this.swapZ({x:e[1],y:e[2],z:o?a:0}),this.swapZ({x:e[1],y:e[2],z:a}),this.swapZ({x:e[4],y:e[5],z:a}),this.swapZ({x:e[4],y:e[5],z:o?0:a})]
return n=i(n,this.chart,!1),e=this.chart.renderer.toLinePath(n,!1)}),t.wrap(t.Axis.prototype,"getLinePath",function(t){return this.chart.is3d()?[]:t.apply(this,[].slice.call(arguments,1))}),t.wrap(t.Axis.prototype,"getPlotBandPath",function(t){if(!this.chart.is3d())return t.apply(this,[].slice.call(arguments,1))
var i=arguments,e=i[1],r=i[2],s=this.getPlotLinePath(r),a=this.getPlotLinePath(e)
return a&&s?a.push("L",s[10],s[11],"L",s[7],s[8],"L",s[4],s[5],"L",s[1],s[2]):a=null,a}),t.wrap(t.Tick.prototype,"getMarkPath",function(t){var e=t.apply(this,[].slice.call(arguments,1))
if(!this.axis.chart.is3d())return e
var r=[this.axis.swapZ({x:e[1],y:e[2],z:0}),this.axis.swapZ({x:e[4],y:e[5],z:0})]
return r=i(r,this.axis.chart,!1),e=["M",r[0].x,r[0].y,"L",r[1].x,r[1].y]}),t.wrap(t.Tick.prototype,"getLabelPosition",function(t){var e=t.apply(this,[].slice.call(arguments,1))
if(!this.axis.chart.is3d())return e
var r=i([this.axis.swapZ({x:e.x,y:e.y,z:0})],this.axis.chart,!1)[0]
return r.x=r.x-(!this.axis.horiz&&this.axis.opposite?this.axis.transA:0),r.old=e,r}),t.wrap(t.Tick.prototype,"handleOverflow",function(t,i){return this.axis.chart.is3d()&&(i=i.old),t.call(this,i)}),t.wrap(t.Axis.prototype,"getTitlePosition",function(t){var e,r,s=this.chart.is3d()
return s&&(r=this.axisTitleMargin,this.axisTitleMargin=0),e=t.apply(this,[].slice.call(arguments,1)),s&&(e=i([this.swapZ({x:e.x,y:e.y,z:0})],this.chart,!1)[0],e[this.horiz?"y":"x"]+=(this.horiz?1:-1)*(this.opposite?-1:1)*r,this.axisTitleMargin=r),e}),t.wrap(t.Axis.prototype,"drawCrosshair",function(t){var i=arguments
this.chart.is3d()&&i[2]&&(i[2]={plotX:i[2].plotXold||i[2].plotX,plotY:i[2].plotYold||i[2].plotY}),t.apply(this,[].slice.call(i,1))}),t.Axis.prototype.swapZ=function(t,i){if(this.isZAxis){var e=i?0:this.chart.plotLeft,r=this.chart
return{x:e+(r.yAxis[0].opposite?t.z:r.xAxis[0].width-t.z),y:t.y,z:t.x-e}}return t}
var v=t.ZAxis=function(){this.isZAxis=!0,this.init.apply(this,arguments)}
t.extend(v.prototype,t.Axis.prototype),t.extend(v.prototype,{setOptions:function(i){i=t.merge({offset:0,lineWidth:0},i),t.Axis.prototype.setOptions.call(this,i),this.coll="zAxis"},setAxisSize:function(){t.Axis.prototype.setAxisSize.call(this),this.width=this.len=this.chart.options.chart.options3d.depth,this.right=this.chart.chartWidth-this.width-this.left},getSeriesExtremes:function(){var i=this,e=i.chart
i.hasVisibleSeries=!1,i.dataMin=i.dataMax=i.ignoreMinPadding=i.ignoreMaxPadding=null,i.buildStacks&&i.buildStacks(),t.each(i.series,function(t){if(t.visible||!e.options.chart.ignoreHiddenSeries){var r,s=t.options,a=s.threshold
i.hasVisibleSeries=!0,i.isLog&&0>=a&&(a=null),r=t.zData,r.length&&(i.dataMin=Math.min(d(i.dataMin,r[0]),Math.min.apply(null,r)),i.dataMax=Math.max(d(i.dataMax,r[0]),Math.max.apply(null,r)))}})}}),t.wrap(t.Chart.prototype,"getAxes",function(i){var e=this,r=this.options,s=r.zAxis=t.splat(r.zAxis||{})
i.call(this),e.is3d()&&(this.zAxis=[],t.each(s,function(t,i){t.index=i,t.isX=!0
var r=new v(e,t)
r.setScale()}))}),t.wrap(t.seriesTypes.column.prototype,"translate",function(e){if(e.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var r=this,s=r.chart,a=r.options,o=a.depth||25,n=a.stacking?a.stack||0:r._i,h=n*(o+(a.groupZPadding||1))
a.grouping!==!1&&(h=0),h+=a.groupZPadding||1,t.each(r.data,function(t){if(null!==t.y){var e=t.shapeArgs,r=t.tooltipPos
t.shapeType="cuboid",e.z=h,e.depth=o,e.insidePlotArea=!0,r=i([{x:r[0],y:r[1],z:h}],s,!1)[0],t.tooltipPos=[r.x,r.y]}}),r.z=h}}),t.wrap(t.seriesTypes.column.prototype,"animate",function(i){if(this.chart.is3d()){var e=arguments,r=e[1],s=this.yAxis,a=this,o=this.yAxis.reversed
t.svg&&(r?t.each(a.data,function(t){null!==t.y&&(t.height=t.shapeArgs.height,t.shapey=t.shapeArgs.y,t.shapeArgs.height=1,o||(t.stackY?t.shapeArgs.y=t.plotY+s.translate(t.stackY):t.shapeArgs.y=t.plotY+(t.negative?-t.height:t.height)))}):(t.each(a.data,function(t){null!==t.y&&(t.shapeArgs.height=t.height,t.shapeArgs.y=t.shapey,t.graphic&&t.graphic.animate(t.shapeArgs,a.options.animation))}),this.drawDataLabels(),a.animate=null))}else i.apply(this,[].slice.call(arguments,1))}),t.wrap(t.seriesTypes.column.prototype,"init",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var i=this.options,e=i.grouping,r=i.stacking,s=d(this.yAxis.options.reversedStacks,!0),a=0
if(void 0===e||e){var o,n=this.chart.retrieveStacks(r),h=i.stack||0
for(o=0;o<n[h].series.length&&n[h].series[o]!==this;o++);a=10*(n.totalStacks-n[h].position)+(s?o:-o),this.xAxis.reversed||(a=10*n.totalStacks-a)}i.zIndex=a}}),t.wrap(t.Series.prototype,"alignDataLabel",function(t){if(this.chart.is3d()&&("column"===this.type||"columnrange"===this.type)){var e=this,r=e.chart,s=arguments,a=s[4],o={x:a.x,y:a.y,z:e.z}
o=i([o],r,!0)[0],a.x=o.x,a.y=o.y}t.apply(this,[].slice.call(arguments,1))}),t.seriesTypes.columnrange&&t.wrap(t.seriesTypes.columnrange.prototype,"drawPoints",o),t.wrap(t.seriesTypes.column.prototype,"drawPoints",o),t.wrap(t.seriesTypes.pie.prototype,"translate",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var i=this,e=i.chart,r=e.options,s=i.options,a=s.depth||0,o=r.chart.options3d,h=o.alpha,p=o.beta,l=s.stacking?(s.stack||0)*a:i._i*a
l+=a/2,s.grouping!==!1&&(l=0),n(i.data,function(t){var e,r=t.shapeArgs
t.shapeType="arc3d",r.z=l,r.depth=.75*a,r.alpha=h,r.beta=p,r.center=i.center,e=(r.end+r.start)/2,t.slicedTranslation={translateX:g(f(e)*s.slicedOffset*f(h*y)),translateY:g(x(e)*s.slicedOffset*f(h*y))}})}}),t.wrap(t.seriesTypes.pie.prototype.pointClass.prototype,"haloPath",function(t){var i=arguments
return this.series.chart.is3d()?[]:t.call(this,i[1])}),t.wrap(t.seriesTypes.pie.prototype,"drawPoints",function(i){var e=this.options,r=e.states
this.chart.is3d()&&(this.borderWidth=e.borderWidth=e.edgeWidth||1,this.borderColor=e.edgeColor=t.pick(e.edgeColor,e.borderColor,void 0),r.hover.borderColor=t.pick(r.hover.edgeColor,this.borderColor),r.hover.borderWidth=t.pick(r.hover.edgeWidth,this.borderWidth),r.select.borderColor=t.pick(r.select.edgeColor,this.borderColor),r.select.borderWidth=t.pick(r.select.edgeWidth,this.borderWidth),n(this.data,function(t){var i=t.pointAttr
i[""].stroke=t.series.borderColor||t.color,i[""]["stroke-width"]=t.series.borderWidth,i.hover.stroke=r.hover.borderColor,i.hover["stroke-width"]=r.hover.borderWidth,i.select.stroke=r.select.borderColor,i.select["stroke-width"]=r.select.borderWidth})),i.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&n(this.points,function(t){var i=t.graphic
i&&i[t.y?"show":"hide"]()})}),t.wrap(t.seriesTypes.pie.prototype,"drawDataLabels",function(t){if(this.chart.is3d()){var i=this,e=i.chart,r=e.options.chart.options3d
n(i.data,function(t){var i=t.shapeArgs,e=i.r,s=(i.alpha||r.alpha)*y,a=(i.beta||r.beta)*y,o=(i.start+i.end)/2,h=t.labelPos,p=[0,2,4],l=-e*(1-f(s))*x(o),d=e*(f(a)-1)*f(o)
n(p,function(t){h[t]+=d,h[t+1]+=l})})}t.apply(this,[].slice.call(arguments,1))}),t.wrap(t.seriesTypes.pie.prototype,"addPoint",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.update(this.userOptions,!0)}),t.wrap(t.seriesTypes.pie.prototype,"animate",function(i){if(this.chart.is3d()){var e,r=arguments,s=r[1],a=this.options.animation,o=this.center,n=this.group,h=this.markerGroup
t.svg&&(a===!0&&(a={}),s?(n.oldtranslateX=n.translateX,n.oldtranslateY=n.translateY,e={translateX:o[0],translateY:o[1],scaleX:.001,scaleY:.001},n.attr(e),h&&(h.attrSetters=n.attrSetters,h.attr(e))):(e={translateX:n.oldtranslateX,translateY:n.oldtranslateY,scaleX:1,scaleY:1},n.animate(e,a),h&&h.animate(e,a),this.animate=null))}else i.apply(this,[].slice.call(arguments,1))}),t.wrap(t.seriesTypes.scatter.prototype,"translate",function(e){if(e.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var r,s,a,o,n,h=this,p=h.chart,l=t.pick(h.zAxis,p.options.zAxis[0]),d=[]
for(n=0;n<h.data.length;n++)r=h.data[n],o=l.isLog&&l.val2lin?l.val2lin(r.z):r.z,r.plotZ=l.translate(o),r.isInside=r.isInside?o>=l.min&&o<=l.max:!1,d.push({x:r.plotX,y:r.plotY,z:r.plotZ})
for(s=i(d,p,!0),n=0;n<h.data.length;n++)r=h.data[n],a=s[n],r.plotXold=r.plotX,r.plotYold=r.plotY,r.plotX=a.x,r.plotY=a.y,r.plotZ=a.z}}),t.wrap(t.seriesTypes.scatter.prototype,"init",function(t,i,e){i.is3d()&&(this.axisTypes=["xAxis","yAxis","zAxis"],this.pointArrayMap=["x","y","z"],this.parallelArrays=["x","y","z"])
var r=t.apply(this,[i,e])
if(this.chart.is3d()){var s="x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"
this.userOptions.tooltip?this.tooltipOptions.pointFormat=this.userOptions.tooltip.pointFormat||s:this.tooltipOptions.pointFormat=s}return r}),t.VMLRenderer&&(t.setOptions({animate:!1}),t.VMLRenderer.prototype.cuboid=t.SVGRenderer.prototype.cuboid,t.VMLRenderer.prototype.cuboidPath=t.SVGRenderer.prototype.cuboidPath,t.VMLRenderer.prototype.toLinePath=t.SVGRenderer.prototype.toLinePath,t.VMLRenderer.prototype.createElement3D=t.SVGRenderer.prototype.createElement3D,t.VMLRenderer.prototype.arc3d=function(i){var e=t.SVGRenderer.prototype.arc3d.call(this,i)
return e.css({zIndex:e.zIndex}),e},t.VMLRenderer.prototype.arc3dPath=t.SVGRenderer.prototype.arc3dPath,t.wrap(t.Axis.prototype,"render",function(t){t.apply(this,[].slice.call(arguments,1)),this.sideFrame&&(this.sideFrame.css({zIndex:0}),this.sideFrame.front.attr({fill:this.sideFrame.color})),this.bottomFrame&&(this.bottomFrame.css({zIndex:1}),this.bottomFrame.front.attr({fill:this.bottomFrame.color})),this.backFrame&&(this.backFrame.css({zIndex:0}),this.backFrame.front.attr({fill:this.backFrame.color}))}))})
