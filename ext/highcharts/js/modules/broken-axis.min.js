!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){function i(){return Array.prototype.slice.call(arguments,1)}function r(t){t.apply(this),this.drawBreaks()}var o=t.pick,e=t.wrap,s=t.each,n=t.extend,a=t.fireEvent,f=t.Axis,l=t.Series
n(f.prototype,{isInBreak:function(t,i){var r=t.repeat||1/0,o=t.from,e=t.to-t.from,r=i>=o?(i-o)%r:r-(o-i)%r
return t.inclusive?e>=r:e>r&&0!==r},isInAnyBreak:function(t,i){var r,e,s,n=this.options.breaks,a=n&&n.length
if(a){for(;a--;)this.isInBreak(n[a],t)&&(r=!0,e||(e=o(n[a].showPoints,this.isXAxis?!1:!0)))
s=r&&i?r&&!e:r}return s}}),e(f.prototype,"setTickPositions",function(t){if(t.apply(this,Array.prototype.slice.call(arguments,1)),this.options.breaks){var i,r=this.tickPositions,o=this.tickPositions.info,e=[]
for(i=0;i<r.length;i++)this.isInAnyBreak(r[i])||e.push(r[i])
this.tickPositions=e,this.tickPositions.info=o}}),e(f.prototype,"init",function(t,i,r){if(r.breaks&&r.breaks.length&&(r.ordinal=!1),t.call(this,i,r),this.options.breaks){var o=this
o.doPostTranslate=!0,this.val2lin=function(t){var i,r,e=t
for(r=0;r<o.breakArray.length;r++)if(i=o.breakArray[r],i.to<=t)e-=i.len
else{if(i.from>=t)break
if(o.isInBreak(i,t)){e-=t-i.from
break}}return e},this.lin2val=function(t){var i,r
for(r=0;r<o.breakArray.length&&(i=o.breakArray[r],!(i.from>=t));r++)i.to<t?t+=i.len:o.isInBreak(i,t)&&(t+=i.len)
return t},this.setExtremes=function(t,i,r,o,e){for(;this.isInAnyBreak(t);)t-=this.closestPointRange
for(;this.isInAnyBreak(i);)i-=this.closestPointRange
f.prototype.setExtremes.call(this,t,i,r,o,e)},this.setAxisTranslation=function(t){f.prototype.setAxisTranslation.call(this,t)
var i,r,e,s,n=o.options.breaks,t=[],l=[],p=0,u=o.userMin||o.min,h=o.userMax||o.max
for(s in n)r=n[s],i=r.repeat||1/0,o.isInBreak(r,u)&&(u+=r.to%i-u%i),o.isInBreak(r,h)&&(h-=h%i-r.from%i)
for(s in n){for(r=n[s],e=r.from,i=r.repeat||1/0;e-i>u;)e-=i
for(;u>e;)e+=i
for(;h>e;e+=i)t.push({value:e,move:"in"}),t.push({value:e+(r.to-r.from),move:"out",size:r.breakSize})}t.sort(function(t,i){return t.value===i.value?("in"===t.move?0:1)-("in"===i.move?0:1):t.value-i.value}),n=0,e=u
for(s in t)r=t[s],n+="in"===r.move?1:-1,1===n&&"in"===r.move&&(e=r.value),0===n&&(l.push({from:e,to:r.value,len:r.value-e-(r.size||0)}),p+=r.value-e-(r.size||0))
o.breakArray=l,a(o,"afterBreaks"),o.transA*=(h-o.min)/(h-u-p),o.min=u,o.max=h}}}),e(l.prototype,"generatePoints",function(t){t.apply(this,i(arguments))
var r,o,e=this.xAxis,s=this.yAxis,n=this.points,a=n.length,f=this.options.connectNulls
if(e&&s&&(e.options.breaks||s.options.breaks))for(;a--;)r=n[a],o=null===r.y&&f===!1,o||!e.isInAnyBreak(r.x,!0)&&!s.isInAnyBreak(r.y,!0)||(n.splice(a,1),this.data[a]&&this.data[a].destroyElements())}),t.Series.prototype.drawBreaks=function(){var t,i,r,e,n,f=this,l=f.points
s(["y","x"],function(p){t=f[p+"Axis"],i=t.breakArray||[],r=t.isXAxis?t.min:o(f.options.threshold,t.min),s(l,function(f){n=o(f["stack"+p.toUpperCase()],f[p]),s(i,function(i){e=!1,r<i.from&&n>i.to||r>i.from&&n<i.from?e="pointBreak":(r<i.from&&n>i.from&&n<i.to||r>i.from&&n>i.to&&n<i.from)&&(e="pointInBreak"),e&&a(t,e,{point:f,brk:i})})})})},e(t.seriesTypes.column.prototype,"drawPoints",r),e(t.Series.prototype,"drawPoints",r)})
